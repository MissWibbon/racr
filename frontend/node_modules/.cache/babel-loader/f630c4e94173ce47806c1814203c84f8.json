{"ast":null,"code":"/*\n * Copyright (c) 2018 by Filestack.\n * Some rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Filelink } from './../filelink';\n/**\n * @private\n */\n\nvar toSnakeCase = function (original) {\n  var snakeCased = {};\n  var keys = Object.keys(original);\n\n  for (var i = 0; i < keys.length; i++) {\n    var newKey = keys[i].split(/(?=[A-Z])/).join('_').toLowerCase();\n\n    if (typeof original[keys[i]] === 'object' && !Array.isArray(original[keys[i]])) {\n      snakeCased[newKey] = toSnakeCase(original[keys[i]]);\n    } else {\n      snakeCased[newKey] = original[keys[i]];\n    }\n  }\n\n  return snakeCased;\n};\n/**\n * Align enum\n */\n\n\nexport var EAlignOptions;\n\n(function (EAlignOptions) {\n  EAlignOptions[\"left\"] = \"left\";\n  EAlignOptions[\"right\"] = \"right\";\n  EAlignOptions[\"center\"] = \"center\";\n  EAlignOptions[\"bottom\"] = \"bottom\";\n  EAlignOptions[\"top\"] = \"top\";\n})(EAlignOptions || (EAlignOptions = {}));\n/**\n * Align enum with faces option\n */\n\n\nexport var EAlignFacesOptions;\n\n(function (EAlignFacesOptions) {\n  EAlignFacesOptions[\"left\"] = \"left\";\n  EAlignFacesOptions[\"right\"] = \"right\";\n  EAlignFacesOptions[\"center\"] = \"center\";\n  EAlignFacesOptions[\"bottom\"] = \"bottom\";\n  EAlignFacesOptions[\"top\"] = \"top\";\n  EAlignFacesOptions[\"faces\"] = \"faces\";\n})(EAlignFacesOptions || (EAlignFacesOptions = {}));\n/**\n * Fit enum\n */\n\n\nexport var EFitOptions;\n\n(function (EFitOptions) {\n  EFitOptions[\"clip\"] = \"clip\";\n  EFitOptions[\"crop\"] = \"crop\";\n  EFitOptions[\"scale\"] = \"scale\";\n  EFitOptions[\"max\"] = \"max\";\n})(EFitOptions || (EFitOptions = {}));\n/**\n * Blur enum\n */\n\n\nexport var EBlurMode;\n\n(function (EBlurMode) {\n  EBlurMode[\"linear\"] = \"linear\";\n  EBlurMode[\"gaussian\"] = \"gaussian\";\n})(EBlurMode || (EBlurMode = {}));\n/**\n * Shapes enum\n */\n\n\nexport var EShapeType;\n\n(function (EShapeType) {\n  EShapeType[\"oval\"] = \"oval\";\n  EShapeType[\"rect\"] = \"rect\";\n})(EShapeType || (EShapeType = {}));\n/**\n * Noise type enum\n */\n\n\nexport var ENoiseType;\n\n(function (ENoiseType) {\n  ENoiseType[\"none\"] = \"none\";\n  ENoiseType[\"low\"] = \"low\";\n  ENoiseType[\"medium\"] = \"medium\";\n  ENoiseType[\"high\"] = \"high\";\n})(ENoiseType || (ENoiseType = {}));\n/**\n * Style type enum\n */\n\n\nexport var EStyleType;\n\n(function (EStyleType) {\n  EStyleType[\"artwork\"] = \"artwork\";\n  EStyleType[\"photo\"] = \"photo\";\n})(EStyleType || (EStyleType = {}));\n/**\n * Color space enum\n */\n\n\nexport var EColorspaceType;\n\n(function (EColorspaceType) {\n  EColorspaceType[\"RGB\"] = \"RGB\";\n  EColorspaceType[\"CMYK\"] = \"CMYK\";\n  EColorspaceType[\"Input\"] = \"Input\";\n})(EColorspaceType || (EColorspaceType = {}));\n/**\n * Crop faces options enum\n */\n\n\nexport var ECropfacesType;\n\n(function (ECropfacesType) {\n  ECropfacesType[\"thumb\"] = \"thumb\";\n  ECropfacesType[\"crop\"] = \"crop\";\n  ECropfacesType[\"fill\"] = \"fill\";\n})(ECropfacesType || (ECropfacesType = {}));\n/**\n * Convert to format\n */\n\n\nexport var EVideoTypes;\n\n(function (EVideoTypes) {\n  EVideoTypes[\"h264\"] = \"h264\";\n  EVideoTypes[\"h264_hi\"] = \"h264.hi\";\n  EVideoTypes[\"webm\"] = \"webm\";\n  EVideoTypes[\"webm-hi\"] = \"webm.hi\";\n  EVideoTypes[\"ogg\"] = \"ogg\";\n  EVideoTypes[\"ogg-hi\"] = \"ogg.hi\";\n  EVideoTypes[\"hls-variant\"] = \"hls.variant\";\n  EVideoTypes[\"mp3\"] = \"mp3\";\n  EVideoTypes[\"oga\"] = \"oga\";\n  EVideoTypes[\"m4a\"] = \"m4a\";\n  EVideoTypes[\"aac\"] = \"aac\";\n  EVideoTypes[\"hls\"] = \"hls.variant.audio\";\n})(EVideoTypes || (EVideoTypes = {}));\n\nexport var EUrlscreenshotAgent;\n\n(function (EUrlscreenshotAgent) {\n  EUrlscreenshotAgent[\"desktop\"] = \"desktop\";\n  EUrlscreenshotAgent[\"mobile\"] = \"mobile\";\n})(EUrlscreenshotAgent || (EUrlscreenshotAgent = {}));\n\nexport var EUrlscreenshotMode;\n\n(function (EUrlscreenshotMode) {\n  EUrlscreenshotMode[\"all\"] = \"all\";\n  EUrlscreenshotMode[\"window\"] = \"window\";\n})(EUrlscreenshotMode || (EUrlscreenshotMode = {}));\n\nexport var EUrlscreenshotOrientation;\n\n(function (EUrlscreenshotOrientation) {\n  EUrlscreenshotOrientation[\"portrait\"] = \"portrait\";\n  EUrlscreenshotOrientation[\"landscape\"] = \"landscape\";\n})(EUrlscreenshotOrientation || (EUrlscreenshotOrientation = {}));\n/**\n * Video storage location\n */\n\n\nexport var EVideoLocations;\n\n(function (EVideoLocations) {\n  EVideoLocations[\"s3\"] = \"s3\";\n  EVideoLocations[\"azure\"] = \"azure\";\n  EVideoLocations[\"gcs\"] = \"gcs\";\n  EVideoLocations[\"rackspace\"] = \"rackspace\";\n  EVideoLocations[\"dropbox\"] = \"dropbox\";\n})(EVideoLocations || (EVideoLocations = {}));\n\nexport var EVideoAccess;\n\n(function (EVideoAccess) {\n  EVideoAccess[\"private\"] = \"private\";\n  EVideoAccess[\"public\"] = \"public\";\n})(EVideoAccess || (EVideoAccess = {}));\n\nexport var EVideoAccessMode;\n\n(function (EVideoAccessMode) {\n  EVideoAccessMode[\"preserve\"] = \"preserve\";\n  EVideoAccessMode[\"constrain\"] = \"constrain\";\n  EVideoAccessMode[\"letterbox\"] = \"letterbox\";\n  EVideoAccessMode[\"pad\"] = \"pad\";\n  EVideoAccessMode[\"crop\"] = \"crop\";\n})(EVideoAccessMode || (EVideoAccessMode = {}));\n/**\n * Creates filestack transform url.\n * Transform params can be provided in camelCase or snakeCase style\n *\n * @example\n * ```js\n * // camelCase\n * console.log(transform(session, {\n *    partialPixelate: {\n *      objects: [[10, 20, 200, 250], [275, 91, 500, 557]],\n *    },\n *  }, 'testfile'));\n * ```\n * result => https://cdn.filestackcontent.com/partial_pixelate=objects:[[10,20,200,250],[275,91,500,557]]/testfile\n *\n * ```js\n * // snake_case\n * console.log(transform(session, {\n *    partial_pixelate: {\n *      objects: [[10, 20, 200, 250], [275, 91, 500, 557]],\n *    },\n *  }, 'testfile'));\n * ```\n * result => https://cdn.filestackcontent.com/partial_pixelate=objects:[[10,20,200,250],[275,91,500,557]]/testfile\n *\n * Client.transform is deprecated. Use Filelink class instead\n *\n * @private\n * @throws Error\n * @param options Transformation options\n * @param url url, handle or array of elements\n */\n\n\nexport var transform = function (session, url, options, b64) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (b64 === void 0) {\n    b64 = false;\n  }\n\n  options = toSnakeCase(options);\n\n  if (session.policy && session.signature) {\n    options.security = {\n      policy: session.policy,\n      signature: session.signature\n    };\n  }\n\n  var filelink = new Filelink(url, session.apikey);\n  filelink.setCname(session.cname);\n  filelink.setBase64(b64);\n  Object.keys(options).forEach(function (key) {\n    if (typeof options[key] === 'boolean' && !options[key] && key !== 'cache') {\n      return;\n    }\n\n    filelink.addTask(key, options[key]);\n  });\n  return filelink.toString();\n};","map":null,"metadata":{},"sourceType":"module"}