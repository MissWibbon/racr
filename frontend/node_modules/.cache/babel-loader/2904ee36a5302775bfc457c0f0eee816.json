{"ast":null,"code":"'use strict';\n/*\n    https://tools.ietf.org/html/rfc3629\n\n    UTF8-char = UTF8-1 / UTF8-2 / UTF8-3 / UTF8-4\n\n    UTF8-1    = %x00-7F\n\n    UTF8-2    = %xC2-DF UTF8-tail\n\n    UTF8-3    = %xE0 %xA0-BF UTF8-tail\n                %xE1-EC 2( UTF8-tail )\n                %xED %x80-9F UTF8-tail\n                %xEE-EF 2( UTF8-tail )\n\n    UTF8-4    = %xF0 %x90-BF 2( UTF8-tail )\n                %xF1-F3 3( UTF8-tail )\n                %xF4 %x80-8F 2( UTF8-tail )\n\n    UTF8-tail = %x80-BF\n*/\n\n/**\n * Check if a Node.js Buffer or Uint8Array is utf-8\n *\n * @param {Buffer|Uint8Array} buf\n * @returns {boolean}\n */\n\nfunction isUtf8(buf) {\n  if (!buf) {\n    return false;\n  }\n\n  var i = 0,\n      len = buf.length;\n\n  while (i < len) {\n    // UTF8-1 = %x00-7F\n    if (buf[i] <= 0x7F) {\n      i++;\n      continue;\n    } // UTF8-2 = %xC2-DF UTF8-tail\n\n\n    if (buf[i] >= 0xC2 && buf[i] <= 0xDF) {\n      // if(buf[i + 1] >= 0x80 && buf[i + 1] <= 0xBF) {\n      if (buf[i + 1] >> 6 === 2) {\n        i += 2;\n        continue;\n      } else {\n        return false;\n      }\n    } // UTF8-3 = %xE0 %xA0-BF UTF8-tail\n    // UTF8-3 = %xED %x80-9F UTF8-tail\n\n\n    if ((buf[i] === 0xE0 && buf[i + 1] >= 0xA0 && buf[i + 1] <= 0xBF || buf[i] === 0xED && buf[i + 1] >= 0x80 && buf[i + 1] <= 0x9F) && buf[i + 2] >> 6 === 2) {\n      i += 3;\n      continue;\n    } // UTF8-3 = %xE1-EC 2( UTF8-tail )\n    // UTF8-3 = %xEE-EF 2( UTF8-tail )\n\n\n    if ((buf[i] >= 0xE1 && buf[i] <= 0xEC || buf[i] >= 0xEE && buf[i] <= 0xEF) && buf[i + 1] >> 6 === 2 && buf[i + 2] >> 6 === 2) {\n      i += 3;\n      continue;\n    } // UTF8-4 = %xF0 %x90-BF 2( UTF8-tail )\n    //          %xF1-F3 3( UTF8-tail )\n    //          %xF4 %x80-8F 2( UTF8-tail )\n\n\n    if ((buf[i] === 0xF0 && buf[i + 1] >= 0x90 && buf[i + 1] <= 0xBF || buf[i] >= 0xF1 && buf[i] <= 0xF3 && buf[i + 1] >> 6 === 2 || buf[i] === 0xF4 && buf[i + 1] >= 0x80 && buf[i + 1] <= 0x8F) && buf[i + 2] >> 6 === 2 && buf[i + 3] >> 6 === 2) {\n      i += 4;\n      continue;\n    }\n\n    return false;\n  }\n\n  return true;\n}\n\nmodule.exports = isUtf8;","map":null,"metadata":{},"sourceType":"script"}